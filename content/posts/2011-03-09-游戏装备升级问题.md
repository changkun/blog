---
date: "2011-03-09 00:07:02"
toc: true
id: 64
slug: /posts/游戏装备升级问题
aliases:
    - /archives/2011/03/64/
tags:
    - 数学
title: 游戏装备升级问题
---


问：装备锻造，一共有10层，每次成功的几率为50%，成功升1层，失败降1层，1层时不再下降。那么玩家平均锻造到10层一共需要锻造多少次？
解：这个是个概率转移问题
也就是问题有10个状态,对应10层,开始在第1层,如果到达第10层则终止.
我们假设如果处于第k层,那么需要平均a(k)次才能够转移到第10层
于是a(10)=0,而对于k>2,a(k)=1+1/2(a(k+1)+a(k-1))
我们只要求解这个递推数列即可。
而特征方程是x^2-2x+1=0
所以a(k)=a+b*k+c*k^2
得到
a(k)=90+k-k^2
于是a(1)=a(0)=90

推广一下到n层的.
于是递推式为a+b*k+c*k^2,满足
a=a+b+c (也就是a(0)=a(1))
a+b+c=a+b*2+c*2^2+2(也就是a(1)=2+a(2))
a+b*n+c*n^2=0
所以a=n^2-n,b=1,c=-1
也就是a(0)=n^2-n,这个是n层的结果.如果11层,的确结果就是110了。